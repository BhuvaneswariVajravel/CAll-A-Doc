const fs = require('fs');
const path = require('path');
const dir = process.cwd();
let absolutePath = "";

function resolveAbsolutePath(p) {
    if (!path.isAbsolute(p)) {
        p = path.resolve(dir, p);
    }

    return p;
}

function fileExists(p) {

    try {
        if (fs.statSync(p).isDirectory()) {
            console.log(p);
            return p;
        }
        if (fs.statSync(p).isFile()) {
            console.log(p);
            return p;
        }
    } catch (e) {

        if (e.code == 'ENOENT') { // no such file or directory. File really does not exist
            console.log("File does not exist.");
            return false;
        }

        console.log("Exception fs.statSync (" + path + "): " + e);
        throw e; // something else went wrong, we don't have rights, ...
    }
}

if (process.argv.indexOf("--path") != -1) {
    absolutePath = resolveAbsolutePath(process.argv[process.argv.indexOf("--path") + 1]);
}

fileExists(absolutePath);
exports.resolveAbsolutePath = resolveAbsolutePath;