"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var router_1 = require("@angular/router");
var http_1 = require("@angular/http");
var configuration_1 = require("../configuration/configuration");
require("rxjs/add/operator/map");
var ApplicationSettings = require("application-settings");
var nativescript_loading_indicator_1 = require("nativescript-loading-indicator");
var connectivity_1 = require("connectivity");
var dialogs = require("ui/dialogs");
var router_2 = require("nativescript-angular/router");
var WebAPIService = (function () {
    function WebAPIService(http, configuration, router, rs) {
        this.http = http;
        this.configuration = configuration;
        this.router = router;
        this.rs = rs;
        this.loader = new nativescript_loading_indicator_1.LoadingIndicator();
        this.options = {
            message: 'Loading...',
            progress: 0.65,
            android: {
                indeterminate: true,
                cancelable: false,
                max: 100,
                progressNumberFormat: "%1d/%2d",
                progressPercentFormat: 0.53,
                progressStyle: 1,
                secondaryProgress: 1
            },
            ios: {
                details: "Additional detail note!",
                margin: 10,
                dimBackground: true,
                color: "#000",
                // background box around indicator 
                // hideBezel will override this if true 
                //backgroundColor: "yellow",
                hideBezel: true,
            }
        };
        this.Key = "";
        this.GroupNumber = "";
        this.ExternalMemberId = "";
        this.usertype = "";
        this.APIKey = configuration.APIKey;
        if (ApplicationSettings.hasKey("USER_DEFAULTS")) {
            var usrdata = JSON.parse(ApplicationSettings.getString("USER_DEFAULTS"));
            this.Key = usrdata.Key;
            this.GroupNumber = usrdata.GroupNumber;
            this.usertype = usrdata.AccountType;
            this.ExternalMemberId = usrdata.ExternalMemberId;
            if (ApplicationSettings.hasKey("MEMBER_ACCESS")) {
                this.ExternalMemberId = ApplicationSettings.getString("MEMBER_ACCESS");
            }
        }
    }
    // For Http POST method - To convert application/json to application/x-www-form-urlencoded format
    WebAPIService.prototype.JsonToFormEncoded = function (details) {
        var formBody = [];
        for (var property in details) {
            var encodedKey = encodeURIComponent(property);
            var encodedValue = encodeURIComponent(details[property]);
            formBody.push(encodedKey + "=" + encodedValue);
        }
        formBody = formBody.join("&");
        return formBody;
    };
    // Get Service Types
    WebAPIService.prototype.activate_http = function (user_input) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { APIKey: this.APIKey, FirstName: user_input.FirstName, LastName: user_input.LastName, DOB: user_input.DOB, ExtMemberId: user_input.ExternalMemberId };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.AuthenticationAPI + "Activate", body, options)
            .map(function (response) { return response; });
    };
    // Get Service Types
    WebAPIService.prototype.authenticate_http = function (username, password) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { APIKey: this.APIKey, LoginName: username, Password: password };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.AuthenticationAPI + "Authenticate", body, options)
            .map(function (response) { return response; });
    };
    // Get Service Types
    WebAPIService.prototype.getServiceType_http = function () {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ListName: "ServiceType", Demo: "None" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.InformationAPI + "CodeList_Get", body, options)
            .map(function (response) { return response; });
    };
    // Get Member InformationAPI
    WebAPIService.prototype.getMemberInfo = function () {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.APIKey, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.getMemberDtls + "GetMemberInfo", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.getMemberInfoForImage = function (ExternalId) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.APIKey, GroupNumber: this.GroupNumber, ExternalMemberId: ExternalId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.getMemberDtls + "GetMemberInfo", body, options)
            .map(function (response) { return response; });
    };
    // Get Member Plan Info
    WebAPIService.prototype.getPlanInfo = function (apiname) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.BenefitsAPI + apiname, body, options)
            .map(function (response) { return response; });
    };
    // Get Member Billing Info
    WebAPIService.prototype.getBillingInfo = function () {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.BenefitsAPI + "BillingInfo_Get", body, options)
            .map(function (response) { return response; });
    };
    // Save Biiling Info
    WebAPIService.prototype.saveBillingInfo = function (usr) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, Demo: "", CardNumber: usr.CardNumber, ExpMonth: usr.ExpMonth, ExpYear: usr.ExpYear, NameOnCard: usr.NameOnCard, Address1: usr.Address1, Address2: usr.Address2, City: usr.City, State: usr.State, Zip: usr.Zip, Phone: usr.Phone };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.BenefitsAPI + "BillingInfo_Set", body, options)
            .map(function (response) { return response; });
    };
    // Save Insurance Info
    WebAPIService.prototype.saveInsureInfo = function (user) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, Demo: "", CarrierName: user.CarrierName, CarrierAddress: user.CarrierAddress, CarrierCity: user.CarrierCity, CarrierState: user.CarrierState, CarrierZip: user.CarrierZip, CarrierPhone: user.CarrierPhone, InsuranceGroupId: user.InsuranceGroupId, InsuranceMemberId: user.InsuranceMemberId, BIN: user.BIN, PCN: user.PCN };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.BenefitsAPI + "InsuranceInfo_Set", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.paymentGateway = function (cardDtls) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, Demo: "", PaymentAmount: cardDtls.ConsultFee, CCVCode: cardDtls.CCVCode, ServiceId: cardDtls.ServiceType, Description: "" };
        var body = this.JsonToFormEncoded(input);
        console.log(body);
        return this.http
            .post(this.configuration.BenefitsAPI + "ProcessCCPayment", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.personalInfoSave = function (user) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.APIKey, ExternalMemberId: this.ExternalMemberId, GroupNumber: this.GroupNumber, FirstName: user.FirstName, LastName: user.LastName, DOB: user.DOB, Gender: user.Gender, Address1: user.Address1, Address2: user.Address2, City: user.City, State: user.State, Zip: user.Zip, Phone: user.Phone, Phone2: user.Phone2, TimeZoneId: user.TimeZoneId, Email: user.Email };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.getMemberDtls + "UpdateMemberP2", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.savePrefPhar = function (user) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, PharmacyName: user.PharmacyName, PharmacyId: user.PharmacyId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ScheduleAPI + "Consultation_MembersPreferredPharmacy_Set", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.getCodeList = function (listname) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.APIKey, GroupNumber: this.GroupNumber, ListName: listname, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.InformationAPI + "CodeList_Get", body, options)
            .map(function (response) { return response; });
    };
    // Get members preferred pharmacy
    WebAPIService.prototype.getMembersPreferredPharmacy_http = function () {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ScheduleAPI + "Consultation_MembersPreferredPharmacy_Get", body, options)
            .map(function (response) { return response; });
    };
    //Request Consult
    WebAPIService.prototype.consultationScheduleEmail_http = function (subject, desc) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, Subject: subject, Content: desc, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ScheduleAPI + "Consultation_NewEmailRequestSubmit", body, options)
            .map(function (response) { return response; });
    };
    //Consulting History
    WebAPIService.prototype.consulthistorydata = function (pfname, plname, servn, servs, startd, endd, pageNo) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, PhysicianFirstName: pfname, PhysicianLastName: plname, ServiceType: servn, ServiceStatus: servs, ServiceDateStart: startd, ServiceDateEnd: endd, PageNumber: pageNo, ItemCountPerPage: 10, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ConsultHistoryAPI + "ConsultationSearch", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.consulthistoryView = function (itemId) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ConsultationItemId: itemId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ConsultHistoryAPI + "ConsultationDetail_Get", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.followUpOrReply = function (conitemId, sub, cont) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ConsultationItemId: conitemId, Subject: sub, Content: cont, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ConsultHistoryAPI + "ConsultationDetail_FollowUpOrReply", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.consultationRecordAudio = function (itemId) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ActionItemId: itemId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ConsultHistoryAPI + "ConsultationRecording_Get", body, options)
            .map(function (response) { return response; });
    };
    //Scheduled Consults
    WebAPIService.prototype.scheduledconsults = function (pageNo) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, PageNumber: pageNo, ItemCountPerPage: 6, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ConsultHistoryAPI + "ConsultationScheduledList_Get", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.markAsReadOrUnread = function (conitemId, read) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ConsultationItemId: conitemId, MarkAsRead: read, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ConsultHistoryAPI + "ConsultationDetail_StatusUpdate", body, options)
            .map(function (response) { return response; });
    };
    //Pharmacy Search
    WebAPIService.prototype.pharmacySearch = function (pharname, zip, state, city) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, PharmacyName: pharname, Zip: zip, MaxCount: 15, StateAbbrev: state, CityName: city, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ScheduleAPI + "Pharmacy_Search", body, options)
            .map(function (response) { return response; });
    };
    //TO Place Markers in PharmacySearch
    WebAPIService.prototype.getPlaces = function (place) {
        var url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=" + place + "&key=AIzaSyBT4TkMAGKWiM_Bh9GhbP_lgLqdRaWwUXw";
        return this.http.get(url).map(function (response) { return response.json(); });
    };
    //To Show INBOX List
    WebAPIService.prototype.getInboxList = function (pageNo) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ItemCountPerPage: 8, PageNumber: pageNo, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.InboxAPI + "InboxItemList_Get", body, options)
            .map(function (response) { return response; });
    };
    //Inbox item data
    WebAPIService.prototype.getInboxItemDtls = function (itemId) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ItemId: itemId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.InboxAPI + "InboxItem_Get", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.inboxItemStatusUpdate = function (itemId, opened) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ItemId: itemId, AlreadyOpened: opened, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.InboxAPI + "InboxItem_StatusUpdate", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.changepassword = function (changepwd) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, UserType: this.usertype, Pwd: changepwd.Password, PwdConfirm: changepwd.ConfirmPassword };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.AuthenticationAPI + "ChangePassword", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.followUpList = function (pageNo) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, PageNumber: pageNo, ItemCountPerPage: 8, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ConsultHistoryAPI + "ConsultationFollowUpList_Get", body, options)
            .map(function (response) { return response; });
    };
    // For got password
    WebAPIService.prototype.forgotPassword = function (name, email) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { APIKey: this.APIKey, LoginName: name, Email: email };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.AuthenticationAPI + "ForgotPassword", body, options)
            .map(function (response) { return response; });
    };
    // Fee details
    WebAPIService.prototype.consultationFeeDetails = function (serviceid) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { APIKey: this.APIKey, ExternalMemberId: this.ExternalMemberId, GroupNumber: this.GroupNumber, ServiceId: serviceid };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ConsultHistoryAPI + "GetConsultFee", body, options)
            .map(function (response) { return response; });
    };
    //Personal and life style Get
    WebAPIService.prototype.personalAndLSSummary = function (apiname) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(apiname != 'FamilyMembers_Grid_Get' ? this.configuration.HealthRecordsAPI + apiname : this.configuration.BenefitsAPI + apiname, body, options)
            .map(function (response) { return response; });
    };
    //EMR Complete
    WebAPIService.prototype.getEMRComplete_http = function () {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.HealthRecordsAPI + "EMRComplete_Get", body, options)
            .map(function (response) { return response; });
    };
    //Drug allergies grid get
    WebAPIService.prototype.drugAllergiesGet = function () {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ItemId: 0, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.HealthRecordsAPI + "EMR_DrugAllergy_Grid_Get", body, options)
            .map(function (response) { return response; });
    };
    //Get Medications List
    WebAPIService.prototype.getMedications_http = function () {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ItemId: 0, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.HealthRecordsAPI + "EMR_Medications_Grid_Get", body, options)
            .map(function (response) { return response; });
    };
    //Get Medical Conditions List
    WebAPIService.prototype.getMedicalConditions_http = function () {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ItemId: 0, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.HealthRecordsAPI + "EMR_MedicalCondition_Grid_Get", body, options)
            .map(function (response) { return response; });
    };
    //Get Medical Conditions List
    WebAPIService.prototype.addOrUpdateMedicalConditions_http = function (item) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ItemId: 0, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.HealthRecordsAPI + "EMR_MedicalCondition_Grid_Get", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.gridGetInHealth = function (apiname) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ItemId: 0, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.HealthRecordsAPI + apiname, body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.getFamilyHistory_http = function () {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ItemId: 0, ConditionId: 0, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.HealthRecordsAPI + "EMR_FamilyHistory_Grid_Get", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.setFamilyHistoryCondition_http = function (conditionId, type) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, ConditionId: conditionId, Type: type, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.HealthRecordsAPI + "EMR_FamilyHistory_SetFamilyHistoryCondition", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.launchTwilioVideo = function (serviceId) {
        var headers = new http_1.Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });
        var options = new http_1.RequestOptions({ headers: headers });
        var input = { Key: this.Key, GroupNumber: this.GroupNumber, ExternalMemberId: this.ExternalMemberId, PersonServiceRequestId: serviceId, Demo: "" };
        var body = this.JsonToFormEncoded(input);
        return this.http
            .post(this.configuration.ConsultHistoryAPI + "VideoConferenceAuthKey_Get", body, options)
            .map(function (response) { return response; });
    };
    WebAPIService.prototype.convertTime24to12 = function (time24) {
        if (time24 != undefined) {
            time24 = time24.split(' ');
            var time12 = void 0;
            var tmpArr = time24[1].split(':');
            if (+tmpArr[0] == 13) {
                time12 = time24[0] + '  ' + (+tmpArr[0] - 1) + ':' + tmpArr[1] + ':' + tmpArr[2] + ' PM';
            }
            else if (+tmpArr[0] == 0) {
                time12 = time24[0] + '  ' + "11:" + tmpArr[1] + ':' + tmpArr[2] + ' PM';
            }
            else {
                if (+tmpArr[0] == 1) {
                    time12 = time24[0] + '  ' + '12:' + tmpArr[1] + ':' + tmpArr[2] + ' AM';
                }
                else {
                    if (+tmpArr[0] > 13)
                        time12 = time24[0] + '  ' + ((+tmpArr[0] - 13).toString().length > 1 ? (+tmpArr[0] - 13) : "0" + (+tmpArr[0] - 13)) + ':' + tmpArr[1] + ':' + tmpArr[2] + ' PM';
                    else
                        time12 = time24[0] + '  ' + ((+tmpArr[0] - 1).toString().length > 1 ? (+tmpArr[0] - 1) : "0" + (+tmpArr[0] - 1)) + ':' + tmpArr[1] + ':' + tmpArr[2] + ' AM';
                }
            }
            return time12;
        }
        else {
            return "";
        }
    };
    WebAPIService.prototype.netConnectivityCheck = function () {
        var value = true;
        if (connectivity_1.getConnectionType() === connectivity_1.connectionType.none) {
            dialogs.alert({
                message: "You are in offline !!!",
                okButtonText: "Ok"
            });
            value = false;
        }
        return value;
    };
    WebAPIService.prototype.clearCache = function () {
        ApplicationSettings.clear();
    };
    WebAPIService.prototype.logout = function () {
        this.clearCache();
        this.rs.navigate(["/login"], { clearHistory: true });
    };
    return WebAPIService;
}());
WebAPIService = __decorate([
    core_1.Injectable(),
    __metadata("design:paramtypes", [http_1.Http, configuration_1.Configuration, router_1.Router, router_2.RouterExtensions])
], WebAPIService);
exports.WebAPIService = WebAPIService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViLWFwaS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2ViLWFwaS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQTJDO0FBQzNDLDBDQUF5QztBQUN6QyxzQ0FBd0U7QUFFeEUsZ0VBQStEO0FBQy9ELGlDQUErQjtBQUMvQiwwREFBNEQ7QUFDNUQsaUZBQWtFO0FBQ2xFLDZDQUFpRTtBQUNqRSxvQ0FBdUM7QUFDdkMsc0RBQStEO0FBSS9ELElBQWEsYUFBYTtJQWdDbEIsdUJBQW9CLElBQVUsRUFBVSxhQUE0QixFQUFVLE1BQWMsRUFBVSxFQUFvQjtRQUF0RyxTQUFJLEdBQUosSUFBSSxDQUFNO1FBQVUsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFBVSxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQVUsT0FBRSxHQUFGLEVBQUUsQ0FBa0I7UUEvQjFILFdBQU0sR0FBRyxJQUFJLGlEQUFnQixFQUFFLENBQUM7UUFDaEMsWUFBTyxHQUFHO1lBQ0YsT0FBTyxFQUFFLFlBQVk7WUFDckIsUUFBUSxFQUFFLElBQUk7WUFDZCxPQUFPLEVBQUU7Z0JBQ0QsYUFBYSxFQUFFLElBQUk7Z0JBQ25CLFVBQVUsRUFBRSxLQUFLO2dCQUNqQixHQUFHLEVBQUUsR0FBRztnQkFDUixvQkFBb0IsRUFBRSxTQUFTO2dCQUMvQixxQkFBcUIsRUFBRSxJQUFJO2dCQUMzQixhQUFhLEVBQUUsQ0FBQztnQkFDaEIsaUJBQWlCLEVBQUUsQ0FBQzthQUMzQjtZQUNELEdBQUcsRUFBRTtnQkFDRyxPQUFPLEVBQUUseUJBQXlCO2dCQUNsQyxNQUFNLEVBQUUsRUFBRTtnQkFDVixhQUFhLEVBQUUsSUFBSTtnQkFDbkIsS0FBSyxFQUFFLE1BQU07Z0JBQ2IsbUNBQW1DO2dCQUNuQyx3Q0FBd0M7Z0JBQ3hDLDRCQUE0QjtnQkFDNUIsU0FBUyxFQUFFLElBQUk7YUFHdEI7U0FDUixDQUFDO1FBR00sUUFBRyxHQUFXLEVBQUUsQ0FBQztRQUNq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QUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2QsTUFBTSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsS0FBSyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztnQkFDaEYsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDQSxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7d0JBQ1osTUFBTSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7b0JBQ3hLLElBQUk7d0JBQ0ksTUFBTSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7Z0JBQzdLLENBQUM7WUFDVCxDQUFDO1lBQ0QsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUN0QixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDQSxNQUFNLENBQUMsRUFBRSxDQUFDO1FBQ2xCLENBQUM7SUFDVCxDQUFDO0lBQ0QsNENBQW9CLEdBQXBCO1FBQ1EsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLEVBQUUsQ0FBQyxDQUFDLGdDQUFpQixFQUFFLEtBQUssNkJBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7Z0JBQ04sT0FBTyxFQUFFLHdCQUF3QjtnQkFDakMsWUFBWSxFQUFFLElBQUk7YUFDekIsQ0FBQyxDQUFBO1lBQ0YsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUN0QixDQUFDO1FBQ0QsTUFBTSxDQUFDLEtBQUssQ0FBQztJQUNyQixDQUFDO0lBQ0Qsa0NBQVUsR0FBVjtRQUNRLG1CQUFtQixDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3BDLENBQUM7SUFDRCw4QkFBTSxHQUFOO1FBQ1EsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBRVQsb0JBQUM7QUFBRCxDQUFDLEFBcGVELElBb2VDO0FBcGVZLGFBQWE7SUFEekIsaUJBQVUsRUFBRTtxQ0FpQ3FCLFdBQUksRUFBeUIsNkJBQWEsRUFBa0IsZUFBTSxFQUFjLHlCQUFnQjtHQWhDckgsYUFBYSxDQW9lekI7QUFwZVksc0NBQWEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7IEh0dHAsIEhlYWRlcnMsIFJlcXVlc3RPcHRpb25zLCBSZXNwb25zZSB9IGZyb20gJ0Bhbmd1bGFyL2h0dHAnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcy9PYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9IGZyb20gJy4uL2NvbmZpZ3VyYXRpb24vY29uZmlndXJhdGlvbic7XHJcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvbWFwJztcclxuaW1wb3J0ICogYXMgQXBwbGljYXRpb25TZXR0aW5ncyBmcm9tIFwiYXBwbGljYXRpb24tc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gXCJuYXRpdmVzY3JpcHQtbG9hZGluZy1pbmRpY2F0b3JcIjtcclxuaW1wb3J0IHsgY29ubmVjdGlvblR5cGUsIGdldENvbm5lY3Rpb25UeXBlIH0gZnJvbSBcImNvbm5lY3Rpdml0eVwiO1xyXG5pbXBvcnQgZGlhbG9ncyA9IHJlcXVpcmUoXCJ1aS9kaWFsb2dzXCIpO1xyXG5pbXBvcnQgeyBSb3V0ZXJFeHRlbnNpb25zIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC1hbmd1bGFyL3JvdXRlclwiO1xyXG5cclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFdlYkFQSVNlcnZpY2Uge1xyXG4gICAgICAgIGxvYWRlciA9IG5ldyBMb2FkaW5nSW5kaWNhdG9yKCk7XHJcbiAgICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdMb2FkaW5nLi4uJyxcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiAwLjY1LFxyXG4gICAgICAgICAgICAgICAgYW5kcm9pZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRldGVybWluYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTnVtYmVyRm9ybWF0OiBcIiUxZC8lMmRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NQZXJjZW50Rm9ybWF0OiAwLjUzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc1N0eWxlOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRhcnlQcm9ncmVzczogMVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGlvczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBcIkFkZGl0aW9uYWwgZGV0YWlsIG5vdGUhXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpbUJhY2tncm91bmQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiMwMDBcIiwgLy8gY29sb3Igb2YgaW5kaWNhdG9yIGFuZCBsYWJlbHMgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgYm94IGFyb3VuZCBpbmRpY2F0b3IgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhpZGVCZXplbCB3aWxsIG92ZXJyaWRlIHRoaXMgaWYgdHJ1ZSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9iYWNrZ3JvdW5kQ29sb3I6IFwieWVsbG93XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVCZXplbDogdHJ1ZSwgLy8gZGVmYXVsdCBmYWxzZSwgY2FuIGhpZGUgdGhlIHN1cnJvdW5kaW5nIGJlemVsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZpZXc6IFVJVmlldywgLy8gVGFyZ2V0IHZpZXcgdG8gc2hvdyBvbiB0b3Agb2YgKERlZmF1bHRzIHRvIGVudGlyZSB3aW5kb3cpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtb2RlOiAvLyBzZWUgaU9TIHNwZWNpZmljIG9wdGlvbnMgYmVsb3cgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwcml2YXRlIGhlYWRlcnM6IEhlYWRlcnM7XHJcbiAgICAgICAgcHJpdmF0ZSBBUElLZXk6IHN0cmluZztcclxuICAgICAgICBwcml2YXRlIEtleTogc3RyaW5nID0gXCJcIjtcclxuICAgICAgICBwcml2YXRlIEdyb3VwTnVtYmVyOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgIHB1YmxpYyBFeHRlcm5hbE1lbWJlcklkOiBzdHJpbmcgPSBcIlwiOyBwcml2YXRlIHVzZXJ0eXBlOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaHR0cDogSHR0cCwgcHJpdmF0ZSBjb25maWd1cmF0aW9uOiBDb25maWd1cmF0aW9uLCBwcml2YXRlIHJvdXRlcjogUm91dGVyLCBwcml2YXRlIHJzOiBSb3V0ZXJFeHRlbnNpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkFQSUtleSA9IGNvbmZpZ3VyYXRpb24uQVBJS2V5O1xyXG4gICAgICAgICAgICAgICAgaWYgKEFwcGxpY2F0aW9uU2V0dGluZ3MuaGFzS2V5KFwiVVNFUl9ERUZBVUxUU1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXNyZGF0YSA9IEpTT04ucGFyc2UoQXBwbGljYXRpb25TZXR0aW5ncy5nZXRTdHJpbmcoXCJVU0VSX0RFRkFVTFRTXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5LZXkgPSB1c3JkYXRhLktleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5Hcm91cE51bWJlciA9IHVzcmRhdGEuR3JvdXBOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlcnR5cGUgPSB1c3JkYXRhLkFjY291bnRUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkV4dGVybmFsTWVtYmVySWQgPSB1c3JkYXRhLkV4dGVybmFsTWVtYmVySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcHBsaWNhdGlvblNldHRpbmdzLmhhc0tleShcIk1FTUJFUl9BQ0NFU1NcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkV4dGVybmFsTWVtYmVySWQgPSBBcHBsaWNhdGlvblNldHRpbmdzLmdldFN0cmluZyhcIk1FTUJFUl9BQ0NFU1NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRm9yIEh0dHAgUE9TVCBtZXRob2QgLSBUbyBjb252ZXJ0IGFwcGxpY2F0aW9uL2pzb24gdG8gYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIGZvcm1hdFxyXG4gICAgICAgIEpzb25Ub0Zvcm1FbmNvZGVkKGRldGFpbHMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmb3JtQm9keTogYW55ID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBkZXRhaWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmNvZGVkS2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KHByb3BlcnR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuY29kZWRWYWx1ZSA9IGVuY29kZVVSSUNvbXBvbmVudChkZXRhaWxzW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Cb2R5LnB1c2goZW5jb2RlZEtleSArIFwiPVwiICsgZW5jb2RlZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvcm1Cb2R5ID0gZm9ybUJvZHkuam9pbihcIiZcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybUJvZHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEdldCBTZXJ2aWNlIFR5cGVzXHJcbiAgICAgICAgYWN0aXZhdGVfaHR0cCh1c2VyX2lucHV0KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEFQSUtleTogdGhpcy5BUElLZXksIEZpcnN0TmFtZTogdXNlcl9pbnB1dC5GaXJzdE5hbWUsIExhc3ROYW1lOiB1c2VyX2lucHV0Lkxhc3ROYW1lLCBET0I6IHVzZXJfaW5wdXQuRE9CLCBFeHRNZW1iZXJJZDogdXNlcl9pbnB1dC5FeHRlcm5hbE1lbWJlcklkIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IHRoaXMuSnNvblRvRm9ybUVuY29kZWQoaW5wdXQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5BdXRoZW50aWNhdGlvbkFQSSArIFwiQWN0aXZhdGVcIiwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEdldCBTZXJ2aWNlIFR5cGVzXHJcbiAgICAgICAgYXV0aGVudGljYXRlX2h0dHAodXNlcm5hbWUsIHBhc3N3b3JkKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEFQSUtleTogdGhpcy5BUElLZXksIExvZ2luTmFtZTogdXNlcm5hbWUsIFBhc3N3b3JkOiBwYXNzd29yZCB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zdCh0aGlzLmNvbmZpZ3VyYXRpb24uQXV0aGVudGljYXRpb25BUEkgKyBcIkF1dGhlbnRpY2F0ZVwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gR2V0IFNlcnZpY2UgVHlwZXNcclxuICAgICAgICBnZXRTZXJ2aWNlVHlwZV9odHRwKCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgTGlzdE5hbWU6IFwiU2VydmljZVR5cGVcIiwgRGVtbzogXCJOb25lXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkluZm9ybWF0aW9uQVBJICsgXCJDb2RlTGlzdF9HZXRcIiwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEdldCBNZW1iZXIgSW5mb3JtYXRpb25BUElcclxuICAgICAgICBnZXRNZW1iZXJJbmZvKCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuQVBJS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBEZW1vOiBcIlwiIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IHRoaXMuSnNvblRvRm9ybUVuY29kZWQoaW5wdXQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5nZXRNZW1iZXJEdGxzICsgXCJHZXRNZW1iZXJJbmZvXCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgZ2V0TWVtYmVySW5mb0ZvckltYWdlKEV4dGVybmFsSWQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLkFQSUtleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IEV4dGVybmFsSWQsIERlbW86IFwiXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLmdldE1lbWJlckR0bHMgKyBcIkdldE1lbWJlckluZm9cIiwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHZXQgTWVtYmVyIFBsYW4gSW5mb1xyXG4gICAgICAgIGdldFBsYW5JbmZvKGFwaW5hbWUpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgRGVtbzogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zdCh0aGlzLmNvbmZpZ3VyYXRpb24uQmVuZWZpdHNBUEkgKyBhcGluYW1lLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gR2V0IE1lbWJlciBCaWxsaW5nIEluZm9cclxuICAgICAgICBnZXRCaWxsaW5nSW5mbygpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgRGVtbzogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zdCh0aGlzLmNvbmZpZ3VyYXRpb24uQmVuZWZpdHNBUEkgKyBcIkJpbGxpbmdJbmZvX0dldFwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2F2ZSBCaWlsaW5nIEluZm9cclxuICAgICAgICBzYXZlQmlsbGluZ0luZm8odXNyOiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgRGVtbzogXCJcIiwgQ2FyZE51bWJlcjogdXNyLkNhcmROdW1iZXIsIEV4cE1vbnRoOiB1c3IuRXhwTW9udGgsIEV4cFllYXI6IHVzci5FeHBZZWFyLCBOYW1lT25DYXJkOiB1c3IuTmFtZU9uQ2FyZCwgQWRkcmVzczE6IHVzci5BZGRyZXNzMSwgQWRkcmVzczI6IHVzci5BZGRyZXNzMiwgQ2l0eTogdXNyLkNpdHksIFN0YXRlOiB1c3IuU3RhdGUsIFppcDogdXNyLlppcCwgUGhvbmU6IHVzci5QaG9uZSB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zdCh0aGlzLmNvbmZpZ3VyYXRpb24uQmVuZWZpdHNBUEkgKyBcIkJpbGxpbmdJbmZvX1NldFwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2F2ZSBJbnN1cmFuY2UgSW5mb1xyXG4gICAgICAgIHNhdmVJbnN1cmVJbmZvKHVzZXI6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBEZW1vOiBcIlwiLCBDYXJyaWVyTmFtZTogdXNlci5DYXJyaWVyTmFtZSwgQ2FycmllckFkZHJlc3M6IHVzZXIuQ2FycmllckFkZHJlc3MsIENhcnJpZXJDaXR5OiB1c2VyLkNhcnJpZXJDaXR5LCBDYXJyaWVyU3RhdGU6IHVzZXIuQ2FycmllclN0YXRlLCBDYXJyaWVyWmlwOiB1c2VyLkNhcnJpZXJaaXAsIENhcnJpZXJQaG9uZTogdXNlci5DYXJyaWVyUGhvbmUsIEluc3VyYW5jZUdyb3VwSWQ6IHVzZXIuSW5zdXJhbmNlR3JvdXBJZCwgSW5zdXJhbmNlTWVtYmVySWQ6IHVzZXIuSW5zdXJhbmNlTWVtYmVySWQsIEJJTjogdXNlci5CSU4sIFBDTjogdXNlci5QQ04gfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkJlbmVmaXRzQVBJICsgXCJJbnN1cmFuY2VJbmZvX1NldFwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGF5bWVudEdhdGV3YXkoY2FyZER0bHM6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBEZW1vOiBcIlwiLCBQYXltZW50QW1vdW50OiBjYXJkRHRscy5Db25zdWx0RmVlLCBDQ1ZDb2RlOiBjYXJkRHRscy5DQ1ZDb2RlLCBTZXJ2aWNlSWQ6IGNhcmREdGxzLlNlcnZpY2VUeXBlLCBEZXNjcmlwdGlvbjogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJvZHkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zdCh0aGlzLmNvbmZpZ3VyYXRpb24uQmVuZWZpdHNBUEkgKyBcIlByb2Nlc3NDQ1BheW1lbnRcIiwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBlcnNvbmFsSW5mb1NhdmUodXNlcjogYW55KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEtleTogdGhpcy5BUElLZXksIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEZpcnN0TmFtZTogdXNlci5GaXJzdE5hbWUsIExhc3ROYW1lOiB1c2VyLkxhc3ROYW1lLCBET0I6IHVzZXIuRE9CLCBHZW5kZXI6IHVzZXIuR2VuZGVyLCBBZGRyZXNzMTogdXNlci5BZGRyZXNzMSwgQWRkcmVzczI6IHVzZXIuQWRkcmVzczIsIENpdHk6IHVzZXIuQ2l0eSwgU3RhdGU6IHVzZXIuU3RhdGUsIFppcDogdXNlci5aaXAsIFBob25lOiB1c2VyLlBob25lLCBQaG9uZTI6IHVzZXIuUGhvbmUyLCBUaW1lWm9uZUlkOiB1c2VyLlRpbWVab25lSWQsIEVtYWlsOiB1c2VyLkVtYWlsIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IHRoaXMuSnNvblRvRm9ybUVuY29kZWQoaW5wdXQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5nZXRNZW1iZXJEdGxzICsgXCJVcGRhdGVNZW1iZXJQMlwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2F2ZVByZWZQaGFyKHVzZXI6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBQaGFybWFjeU5hbWU6IHVzZXIuUGhhcm1hY3lOYW1lLCBQaGFybWFjeUlkOiB1c2VyLlBoYXJtYWN5SWQsIERlbW86IFwiXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLlNjaGVkdWxlQVBJICsgXCJDb25zdWx0YXRpb25fTWVtYmVyc1ByZWZlcnJlZFBoYXJtYWN5X1NldFwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldENvZGVMaXN0KGxpc3RuYW1lKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEtleTogdGhpcy5BUElLZXksIEdyb3VwTnVtYmVyOiB0aGlzLkdyb3VwTnVtYmVyLCBMaXN0TmFtZTogbGlzdG5hbWUsIERlbW86IFwiXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkluZm9ybWF0aW9uQVBJICsgXCJDb2RlTGlzdF9HZXRcIiwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEdldCBtZW1iZXJzIHByZWZlcnJlZCBwaGFybWFjeVxyXG4gICAgICAgIGdldE1lbWJlcnNQcmVmZXJyZWRQaGFybWFjeV9odHRwKCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBEZW1vOiBcIlwiIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IHRoaXMuSnNvblRvRm9ybUVuY29kZWQoaW5wdXQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5TY2hlZHVsZUFQSSArIFwiQ29uc3VsdGF0aW9uX01lbWJlcnNQcmVmZXJyZWRQaGFybWFjeV9HZXRcIiwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vUmVxdWVzdCBDb25zdWx0XHJcbiAgICAgICAgY29uc3VsdGF0aW9uU2NoZWR1bGVFbWFpbF9odHRwKHN1YmplY3Q6IHN0cmluZywgZGVzYzogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEtleTogdGhpcy5LZXksIEdyb3VwTnVtYmVyOiB0aGlzLkdyb3VwTnVtYmVyLCBFeHRlcm5hbE1lbWJlcklkOiB0aGlzLkV4dGVybmFsTWVtYmVySWQsIFN1YmplY3Q6IHN1YmplY3QsIENvbnRlbnQ6IGRlc2MsIERlbW86IFwiXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLlNjaGVkdWxlQVBJICsgXCJDb25zdWx0YXRpb25fTmV3RW1haWxSZXF1ZXN0U3VibWl0XCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL0NvbnN1bHRpbmcgSGlzdG9yeVxyXG4gICAgICAgIGNvbnN1bHRoaXN0b3J5ZGF0YShwZm5hbWUsIHBsbmFtZSwgc2Vydm4sIHNlcnZzLCBzdGFydGQsIGVuZGQsIHBhZ2VObyk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBQaHlzaWNpYW5GaXJzdE5hbWU6IHBmbmFtZSwgUGh5c2ljaWFuTGFzdE5hbWU6IHBsbmFtZSwgU2VydmljZVR5cGU6IHNlcnZuLCBTZXJ2aWNlU3RhdHVzOiBzZXJ2cywgU2VydmljZURhdGVTdGFydDogc3RhcnRkLCBTZXJ2aWNlRGF0ZUVuZDogZW5kZCwgUGFnZU51bWJlcjogcGFnZU5vLCBJdGVtQ291bnRQZXJQYWdlOiAxMCwgRGVtbzogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkNvbnN1bHRIaXN0b3J5QVBJICsgXCJDb25zdWx0YXRpb25TZWFyY2hcIiwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN1bHRoaXN0b3J5VmlldyhpdGVtSWQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgQ29uc3VsdGF0aW9uSXRlbUlkOiBpdGVtSWQsIERlbW86IFwiXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5Db25zdWx0SGlzdG9yeUFQSSArIFwiQ29uc3VsdGF0aW9uRGV0YWlsX0dldFwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9sbG93VXBPclJlcGx5KGNvbml0ZW1JZCwgc3ViLCBjb250KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEtleTogdGhpcy5LZXksIEdyb3VwTnVtYmVyOiB0aGlzLkdyb3VwTnVtYmVyLCBFeHRlcm5hbE1lbWJlcklkOiB0aGlzLkV4dGVybmFsTWVtYmVySWQsIENvbnN1bHRhdGlvbkl0ZW1JZDogY29uaXRlbUlkLCBTdWJqZWN0OiBzdWIsIENvbnRlbnQ6IGNvbnQsIERlbW86IFwiXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5Db25zdWx0SGlzdG9yeUFQSSArIFwiQ29uc3VsdGF0aW9uRGV0YWlsX0ZvbGxvd1VwT3JSZXBseVwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3VsdGF0aW9uUmVjb3JkQXVkaW8oaXRlbUlkKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEtleTogdGhpcy5LZXksIEdyb3VwTnVtYmVyOiB0aGlzLkdyb3VwTnVtYmVyLCBFeHRlcm5hbE1lbWJlcklkOiB0aGlzLkV4dGVybmFsTWVtYmVySWQsIEFjdGlvbkl0ZW1JZDogaXRlbUlkLCBEZW1vOiBcIlwiIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IHRoaXMuSnNvblRvRm9ybUVuY29kZWQoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zdCh0aGlzLmNvbmZpZ3VyYXRpb24uQ29uc3VsdEhpc3RvcnlBUEkgKyBcIkNvbnN1bHRhdGlvblJlY29yZGluZ19HZXRcIiwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vU2NoZWR1bGVkIENvbnN1bHRzXHJcbiAgICAgICAgc2NoZWR1bGVkY29uc3VsdHMocGFnZU5vKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEtleTogdGhpcy5LZXksIEdyb3VwTnVtYmVyOiB0aGlzLkdyb3VwTnVtYmVyLCBFeHRlcm5hbE1lbWJlcklkOiB0aGlzLkV4dGVybmFsTWVtYmVySWQsIFBhZ2VOdW1iZXI6IHBhZ2VObywgSXRlbUNvdW50UGVyUGFnZTogNiwgRGVtbzogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkNvbnN1bHRIaXN0b3J5QVBJICsgXCJDb25zdWx0YXRpb25TY2hlZHVsZWRMaXN0X0dldFwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWFya0FzUmVhZE9yVW5yZWFkKGNvbml0ZW1JZCwgcmVhZCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBDb25zdWx0YXRpb25JdGVtSWQ6IGNvbml0ZW1JZCwgTWFya0FzUmVhZDogcmVhZCwgRGVtbzogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkNvbnN1bHRIaXN0b3J5QVBJICsgXCJDb25zdWx0YXRpb25EZXRhaWxfU3RhdHVzVXBkYXRlXCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL1BoYXJtYWN5IFNlYXJjaFxyXG4gICAgICAgIHBoYXJtYWN5U2VhcmNoKHBoYXJuYW1lLCB6aXAsIHN0YXRlLCBjaXR5KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEtleTogdGhpcy5LZXksIEdyb3VwTnVtYmVyOiB0aGlzLkdyb3VwTnVtYmVyLCBFeHRlcm5hbE1lbWJlcklkOiB0aGlzLkV4dGVybmFsTWVtYmVySWQsIFBoYXJtYWN5TmFtZTogcGhhcm5hbWUsIFppcDogemlwLCBNYXhDb3VudDogMTUsIFN0YXRlQWJicmV2OiBzdGF0ZSwgQ2l0eU5hbWU6IGNpdHksIERlbW86IFwiXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5TY2hlZHVsZUFQSSArIFwiUGhhcm1hY3lfU2VhcmNoXCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL1RPIFBsYWNlIE1hcmtlcnMgaW4gUGhhcm1hY3lTZWFyY2hcclxuICAgICAgICBnZXRQbGFjZXMocGxhY2UpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHVybCA9IFwiaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL3BsYWNlL3RleHRzZWFyY2gvanNvbj9xdWVyeT1cIiArIHBsYWNlICsgXCIma2V5PUFJemFTeUJUNFRrTUFHS1dpTV9CaDlHaGJQX2xnTHFkUmFXd1VYd1wiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKS5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9UbyBTaG93IElOQk9YIExpc3RcclxuICAgICAgICBnZXRJbmJveExpc3QocGFnZU5vKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEtleTogdGhpcy5LZXksIEdyb3VwTnVtYmVyOiB0aGlzLkdyb3VwTnVtYmVyLCBFeHRlcm5hbE1lbWJlcklkOiB0aGlzLkV4dGVybmFsTWVtYmVySWQsIEl0ZW1Db3VudFBlclBhZ2U6IDgsIFBhZ2VOdW1iZXI6IHBhZ2VObywgRGVtbzogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkluYm94QVBJICsgXCJJbmJveEl0ZW1MaXN0X0dldFwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9JbmJveCBpdGVtIGRhdGFcclxuICAgICAgICBnZXRJbmJveEl0ZW1EdGxzKGl0ZW1JZCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBJdGVtSWQ6IGl0ZW1JZCwgRGVtbzogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkluYm94QVBJICsgXCJJbmJveEl0ZW1fR2V0XCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbmJveEl0ZW1TdGF0dXNVcGRhdGUoaXRlbUlkLCBvcGVuZWQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgSXRlbUlkOiBpdGVtSWQsIEFscmVhZHlPcGVuZWQ6IG9wZW5lZCwgRGVtbzogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkluYm94QVBJICsgXCJJbmJveEl0ZW1fU3RhdHVzVXBkYXRlXCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGFuZ2VwYXNzd29yZChjaGFuZ2Vwd2QpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgVXNlclR5cGU6IHRoaXMudXNlcnR5cGUsIFB3ZDogY2hhbmdlcHdkLlBhc3N3b3JkLCBQd2RDb25maXJtOiBjaGFuZ2Vwd2QuQ29uZmlybVBhc3N3b3JkIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IHRoaXMuSnNvblRvRm9ybUVuY29kZWQoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zdCh0aGlzLmNvbmZpZ3VyYXRpb24uQXV0aGVudGljYXRpb25BUEkgKyBcIkNoYW5nZVBhc3N3b3JkXCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb2xsb3dVcExpc3QocGFnZU5vKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEtleTogdGhpcy5LZXksIEdyb3VwTnVtYmVyOiB0aGlzLkdyb3VwTnVtYmVyLCBFeHRlcm5hbE1lbWJlcklkOiB0aGlzLkV4dGVybmFsTWVtYmVySWQsIFBhZ2VOdW1iZXI6IHBhZ2VObywgSXRlbUNvdW50UGVyUGFnZTogOCwgRGVtbzogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkNvbnN1bHRIaXN0b3J5QVBJICsgXCJDb25zdWx0YXRpb25Gb2xsb3dVcExpc3RfR2V0XCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGb3IgZ290IHBhc3N3b3JkXHJcbiAgICAgICAgZm9yZ290UGFzc3dvcmQobmFtZSwgZW1haWwpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgQVBJS2V5OiB0aGlzLkFQSUtleSwgTG9naW5OYW1lOiBuYW1lLCBFbWFpbDogZW1haWwgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5BdXRoZW50aWNhdGlvbkFQSSArIFwiRm9yZ290UGFzc3dvcmRcIiwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEZlZSBkZXRhaWxzXHJcbiAgICAgICAgY29uc3VsdGF0aW9uRmVlRGV0YWlscyhzZXJ2aWNlaWQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgQVBJS2V5OiB0aGlzLkFQSUtleSwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgU2VydmljZUlkOiBzZXJ2aWNlaWQgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5Db25zdWx0SGlzdG9yeUFQSSArIFwiR2V0Q29uc3VsdEZlZVwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9QZXJzb25hbCBhbmQgbGlmZSBzdHlsZSBHZXRcclxuICAgICAgICBwZXJzb25hbEFuZExTU3VtbWFyeShhcGluYW1lKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBSZXF1ZXN0T3B0aW9ucyh7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB7IEtleTogdGhpcy5LZXksIEdyb3VwTnVtYmVyOiB0aGlzLkdyb3VwTnVtYmVyLCBFeHRlcm5hbE1lbWJlcklkOiB0aGlzLkV4dGVybmFsTWVtYmVySWQsIERlbW86IFwiXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KGFwaW5hbWUgIT0gJ0ZhbWlseU1lbWJlcnNfR3JpZF9HZXQnID8gdGhpcy5jb25maWd1cmF0aW9uLkhlYWx0aFJlY29yZHNBUEkgKyBhcGluYW1lIDogdGhpcy5jb25maWd1cmF0aW9uLkJlbmVmaXRzQVBJICsgYXBpbmFtZSwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vRU1SIENvbXBsZXRlXHJcbiAgICAgICAgZ2V0RU1SQ29tcGxldGVfaHR0cCgpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgRGVtbzogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zdCh0aGlzLmNvbmZpZ3VyYXRpb24uSGVhbHRoUmVjb3Jkc0FQSSArIFwiRU1SQ29tcGxldGVfR2V0XCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL0RydWcgYWxsZXJnaWVzIGdyaWQgZ2V0XHJcbiAgICAgICAgZHJ1Z0FsbGVyZ2llc0dldCgpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgSXRlbUlkOiAwLCBEZW1vOiBcIlwiIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IHRoaXMuSnNvblRvRm9ybUVuY29kZWQoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zdCh0aGlzLmNvbmZpZ3VyYXRpb24uSGVhbHRoUmVjb3Jkc0FQSSArIFwiRU1SX0RydWdBbGxlcmd5X0dyaWRfR2V0XCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL0dldCBNZWRpY2F0aW9ucyBMaXN0XHJcbiAgICAgICAgZ2V0TWVkaWNhdGlvbnNfaHR0cCgpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgSXRlbUlkOiAwLCBEZW1vOiBcIlwiIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IHRoaXMuSnNvblRvRm9ybUVuY29kZWQoaW5wdXQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5IZWFsdGhSZWNvcmRzQVBJICsgXCJFTVJfTWVkaWNhdGlvbnNfR3JpZF9HZXRcIiwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vR2V0IE1lZGljYWwgQ29uZGl0aW9ucyBMaXN0XHJcbiAgICAgICAgZ2V0TWVkaWNhbENvbmRpdGlvbnNfaHR0cCgpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgSXRlbUlkOiAwLCBEZW1vOiBcIlwiIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IHRoaXMuSnNvblRvRm9ybUVuY29kZWQoaW5wdXQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5IZWFsdGhSZWNvcmRzQVBJICsgXCJFTVJfTWVkaWNhbENvbmRpdGlvbl9HcmlkX0dldFwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9HZXQgTWVkaWNhbCBDb25kaXRpb25zIExpc3RcclxuICAgICAgICBhZGRPclVwZGF0ZU1lZGljYWxDb25kaXRpb25zX2h0dHAoaXRlbSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBJdGVtSWQ6IDAsIERlbW86IFwiXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkhlYWx0aFJlY29yZHNBUEkgKyBcIkVNUl9NZWRpY2FsQ29uZGl0aW9uX0dyaWRfR2V0XCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBncmlkR2V0SW5IZWFsdGgoYXBpbmFtZSk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBJdGVtSWQ6IDAsIERlbW86IFwiXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5IZWFsdGhSZWNvcmRzQVBJICsgYXBpbmFtZSwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldEZhbWlseUhpc3RvcnlfaHR0cCgpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgSXRlbUlkOiAwLCBDb25kaXRpb25JZDogMCwgRGVtbzogXCJcIiB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLkpzb25Ub0Zvcm1FbmNvZGVkKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QodGhpcy5jb25maWd1cmF0aW9uLkhlYWx0aFJlY29yZHNBUEkgKyBcIkVNUl9GYW1pbHlIaXN0b3J5X0dyaWRfR2V0XCIsIGJvZHksIG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRGYW1pbHlIaXN0b3J5Q29uZGl0aW9uX2h0dHAoY29uZGl0aW9uSWQsIHR5cGUpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHsgaGVhZGVyczogaGVhZGVycyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IHsgS2V5OiB0aGlzLktleSwgR3JvdXBOdW1iZXI6IHRoaXMuR3JvdXBOdW1iZXIsIEV4dGVybmFsTWVtYmVySWQ6IHRoaXMuRXh0ZXJuYWxNZW1iZXJJZCwgQ29uZGl0aW9uSWQ6IGNvbmRpdGlvbklkLCBUeXBlOiB0eXBlLCBEZW1vOiBcIlwiIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IHRoaXMuSnNvblRvRm9ybUVuY29kZWQoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zdCh0aGlzLmNvbmZpZ3VyYXRpb24uSGVhbHRoUmVjb3Jkc0FQSSArIFwiRU1SX0ZhbWlseUhpc3RvcnlfU2V0RmFtaWx5SGlzdG9yeUNvbmRpdGlvblwiLCBib2R5LCBvcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxhdW5jaFR3aWxpb1ZpZGVvKHNlcnZpY2VJZCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0geyBLZXk6IHRoaXMuS2V5LCBHcm91cE51bWJlcjogdGhpcy5Hcm91cE51bWJlciwgRXh0ZXJuYWxNZW1iZXJJZDogdGhpcy5FeHRlcm5hbE1lbWJlcklkLCBQZXJzb25TZXJ2aWNlUmVxdWVzdElkOiBzZXJ2aWNlSWQsIERlbW86IFwiXCIgfTtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gdGhpcy5Kc29uVG9Gb3JtRW5jb2RlZChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0KHRoaXMuY29uZmlndXJhdGlvbi5Db25zdWx0SGlzdG9yeUFQSSArIFwiVmlkZW9Db25mZXJlbmNlQXV0aEtleV9HZXRcIiwgYm9keSwgb3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiByZXNwb25zZSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb252ZXJ0VGltZTI0dG8xMih0aW1lMjQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lMjQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUyNCA9IHRpbWUyNC5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZTEyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG1wQXJyID0gdGltZTI0WzFdLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgrdG1wQXJyWzBdID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTEyID0gdGltZTI0WzBdICsgJyAgJyArICgrdG1wQXJyWzBdIC0gMSkgKyAnOicgKyB0bXBBcnJbMV0gKyAnOicgKyB0bXBBcnJbMl0gKyAnIFBNJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgrdG1wQXJyWzBdID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lMTIgPSB0aW1lMjRbMF0gKyAnICAnICsgXCIxMTpcIiArIHRtcEFyclsxXSArICc6JyArIHRtcEFyclsyXSArICcgUE0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgrdG1wQXJyWzBdID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUxMiA9IHRpbWUyNFswXSArICcgICcgKyAnMTI6JyArIHRtcEFyclsxXSArICc6JyArIHRtcEFyclsyXSArICcgQU0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoK3RtcEFyclswXSA+IDEzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lMTIgPSB0aW1lMjRbMF0gKyAnICAnICsgKCgrdG1wQXJyWzBdIC0gMTMpLnRvU3RyaW5nKCkubGVuZ3RoID4gMSA/ICgrdG1wQXJyWzBdIC0gMTMpIDogXCIwXCIgKyAoK3RtcEFyclswXSAtIDEzKSkgKyAnOicgKyB0bXBBcnJbMV0gKyAnOicgKyB0bXBBcnJbMl0gKyAnIFBNJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTEyID0gdGltZTI0WzBdICsgJyAgJyArICgoK3RtcEFyclswXSAtIDEpLnRvU3RyaW5nKCkubGVuZ3RoID4gMSA/ICgrdG1wQXJyWzBdIC0gMSkgOiBcIjBcIiArICgrdG1wQXJyWzBdIC0gMSkpICsgJzonICsgdG1wQXJyWzFdICsgJzonICsgdG1wQXJyWzJdICsgJyBBTSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aW1lMTI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbmV0Q29ubmVjdGl2aXR5Q2hlY2soKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdldENvbm5lY3Rpb25UeXBlKCkgPT09IGNvbm5lY3Rpb25UeXBlLm5vbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9ncy5hbGVydCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJZb3UgYXJlIGluIG9mZmxpbmUgISEhXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tCdXR0b25UZXh0OiBcIk9rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2xlYXJDYWNoZSgpIHtcclxuICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uU2V0dGluZ3MuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9nb3V0KCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJzLm5hdmlnYXRlKFtcIi9sb2dpblwiXSwgeyBjbGVhckhpc3Rvcnk6IHRydWUgfSk7XHJcbiAgICAgICAgfVxyXG5cclxufSJdfQ==